<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>COURT ORDER</title>

    <style>
        p.help-block {
            color: gray;
        }

        .fsneakers,
        .fstreetwear,
        .faccessories,
        .fview,
        .foriginalbox,
        .fcleaning {
            display: none;
        }
    </style>

</head>

<body>


    <div class="container">
        <div id="formbox" style=" margin-top:50px" class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2">
            <h1>CONSIGNMENT FORM</h1>

            <form id="cocform">

                <!--EMAIL ADDRESS-->
                <fieldset>
                    <legend>Email Address</legend>
                    <div class="form-group">
                        <input id="id-email" type="email" name="email" class="form-control" required>
                    </div>
                </fieldset>


                <!--FULL NAME-->
                <fieldset>
                    <legend>Full Name</legend>
                    <div class="form-group">
                        <input id="id-fullname" type="text" name="fullname" class="form-control" required>
                    </div>
                </fieldset>

                <!--FRANCHISE-->
                <fieldset>
                    <legend>Franchise</legend>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="franchise" value="jhb" id="id-jhb" required>
                                JHB
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="franchise" value="cpt" id="id-cpt" required>
                                CPT
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--CATEGORY-->
                <fieldset>
                    <legend>Select Category</legend>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="category" value="sneakers" id="id-sneakers" required>
                                Sneakers
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="category" value="streetwear" id="id-sneakers" required>
                                Streetwear
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="category" value="accessories" id="id-accessories" required>
                                Accessories
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--CATEGORY SPECIFIC INPUTS START-->
                <!---------------------------------->

                <!--SNEAKERS SIZE-->
                <fieldset class="fsneakers size">
                    <legend>Sneakers Size</legend>
                    <div class="form-group">
                        <select class="form-control" id="sneakersize">
                            <option>UK 3</option>
                            <option>UK 3.5</option>
                            <option>UK 4</option>
                            <option>UK 4.5</option>
                            <option>UK 5</option>
                            <option>UK 5.5</option>
                            <option>UK 6</option>
                            <option>UK 6.5</option>
                            <option>UK 7</option>
                            <option>UK 7.5</option>
                            <option>UK 8</option>
                            <option>UK 8.5</option>
                            <option>UK 9</option>
                            <option>UK 9.5</option>
                            <option>UK 10</option>
                            <option>UK 10.5</option>
                            <option>UK 11</option>
                            <option>UK 11.5</option>
                            <option>UK 12</option>
                            <option>UK 12.5</option>
                            <option>UK 13</option>
                            <option>UK 13.5</option>
                        </select>
                    </div>
                </fieldset>

                <!--STREETWEAR SIZE-->
                <fieldset class="fstreetwear size">
                    <legend>Streetwear Size</legend>
                    <div class="form-group">
                        <select class="form-control" id="streetwear">
                            <option>Extra Small</option>
                            <option>Small</option>
                            <option>Medium</option>
                            <option>Large</option>
                            <option>Extra Large</option>
                            <option>XX Large</option>
                        </select>
                    </div>
                </fieldset>

                <!--ACCESSORIES SIZE-->
                <fieldset class="faccessories size">
                    <legend>Accessories Size</legend>
                    <div class="form-group">
                        <select class="form-control" id="accessories">
                            <option>One Size</option>
                            <option>Small</option>
                            <option>Medium</option>
                            <option>Large</option>
                            <option>Extra Large</option>
                            <option>Not Applicable</option>
                        </select>
                    </div>
                </fieldset>

                <!--CONDITION-->
                <fieldset>
                    <legend>Condition</legend>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="condition" value="new" id="id-new" required>
                                Brand New
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="condition" value="old" id="id-old" required>
                                Pre-Owned
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--ORIGINAL BOX-->
                <fieldset class="foriginalbox">
                    <legend>Original Box?</legend>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="originalbox" value="yes" id="id-originalbox-yes" required>
                                Yes
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="originalbox" value="no" id="id-originalbox-no" required>
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--REQUIRES CLEANING-->
                <fieldset class="fcleaning">
                    <legend>Requires Cleaning?</legend>
                    <p class="help-block">If yes, cleaning charges to be paid upfront are: R 80.00</p>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="cleaning" value="yes" id="id-cleaning-yes" required>
                                Yes
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="cleaning" value="no" id="id-cleaning-no" required>
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--CATEGORY SPECIFIC INPUTS END -->
                <!--------------------------------->

                <!--PRODUCT BRAND-->
                <fieldset>
                    <legend>Product Brand</legend>
                    <div class="form-group">
                        <input id="id-brand" type="text" name="brand" class="form-control" required>
                    </div>
                </fieldset>

                <!--PRODUCT NAME-->
                <fieldset>
                    <legend>Product Name/Description</legend>
                    <div class="form-group">
                        <input id="id-description" type="text" name="description" class="form-control" required>
                    </div>
                </fieldset>

                <!--PRODUCT ID/CODE-->
                <fieldset>
                    <legend>Product ID/Code</legend>
                    <div class="form-group">
                        <input id="id-code" type="text" name="code" class="form-control" required>
                    </div>
                </fieldset>

                <!--PROOF OF PURCHASE-->
                <fieldset>
                    <legend>Proof of Purchase Available/Supplied?</legend>
                    <div class="form-group">
                        <div class="radio">
                            <label>
                                <input type="radio" name="proofofpurchase" value="yes" id="id-proofofpurchase-yes"
                                    required>
                                Yes
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="proofofpurchase" value="no" id="id-proofofpurchase-no"
                                    required>
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>

                <!--LISTING PRICE-->
                <fieldset>
                    <legend>Listing Price</legend>
                    <div class="form-group">
                        <input id="id-listingprice" type="text" name="listingprice" class="form-control"
                            onkeypress="return isNumberKey(event)" onchange="calNetPrice();" required>
                    </div>
                </fieldset>

                <!--NET PRICE-->
                <fieldset>
                    <legend>Net Price</legend>
                    <div class="form-group">
                        <input id="id-netprice" type="text" name="netprice" class="form-control" required readonly>
                    </div>
                </fieldset>

                <!--PRODUCT PHOTOS START-->
                <!------------------------>

                <!--FRONT VIEW-->
                <fieldset class="fview">
                    <legend>Upload Photo 1 - Front View</legend>
                    <div class="form-group">
                        <img src="https://drive.google.com/uc?id=1Yzwi6wstx7P9GsexRJ7X5VkoSODqEPgE"
                            style="max-width: 100%;">
                        <input id="id-frontview" name="frontview" type="file" accept="image/*" capture="camera"
                            class="form-control-file" />
                    </div>
                </fieldset>
                <div id="up-frontview"></div>
                <hr>

                <!--LEFT VIEW-->
                <fieldset class="fview">
                    <legend>Upload Photo 1 - Left Side View</legend>
                    <div class="form-group">
                        <img src="https://drive.google.com/uc?id=13zviQYLLQJNuYN-ZfmgyePCK2hmcqTHl"
                            style="max-width: 100%;">
                        <input id="id-leftview" name="leftview" type="file" accept="image/*" capture="camera"
                            class="form-control-file" />
                    </div>
                </fieldset>
                <div id="up-leftview"></div>

                <!--RIGHT VIEW-->
                <fieldset class="fview">
                    <legend>Upload Photo 1 - Right Side View</legend>
                    <div class="form-group">
                        <img src="https://drive.google.com/uc?id=1Ddcq0LiEbDCcOCRGxgkjxNHH_RT4CdPf"
                            style="max-width: 100%;">
                        <input id="id-rightview" name="rightview" type="file" accept="image/*" capture="camera"
                            class="form-control-file" />
                    </div>
                </fieldset>
                <div id="up-rightview"></div>

                <!--HEEL VIEW-->
                <fieldset class="fview">
                    <legend>Upload Photo 1 - Heel Tab View</legend>
                    <div class="form-group">
                        <img src="https://drive.google.com/uc?id=1Eh4SqHmbi_HJDQ1iH9X9o8STKA6L019R"
                            style="max-width: 100%;">
                        <input id="id-heelview" name="heelview" type="file" accept="image/*" capture="camera"
                            class="form-control-file" />
                    </div>
                </fieldset>
                <div id="up-heelview"></div>


                <!--SOLE VIEW-->
                <fieldset class="fview">
                    <legend>Upload Photo 1 - Soles View</legend>
                    <div class="form-group">
                        <img src="https://drive.google.com/uc?id=1zpHwEHYtFj58nUR5IEXdX7yeX1ZpcBAB"
                            style="max-width: 100%;">
                        <input id="id-soleview" name="soleview" type="file" accept="image/*" capture="camera"
                            class="form-control-file" />
                    </div>
                </fieldset>
                <div id="up-soleview"></div>

                <!--PRODUCT PHOTOS END-->
                <!---------------------->

                <input class="btn btn-primary" id="id-submit" type="submit" value="Submit">
            </form>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
            <script
                src="https://cdnjs.cloudflare.com/ajax/libs/jquery-serialize-object/2.5.0/jquery.serialize-object.min.js">
            </script>

        </div>
    </div>

</body>

<script>
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }

    function calNetPrice() {
        var category = $("input[name='category']:checked").val();
        var condition = $("input[name='condition']:checked").val();
        var conditionVal = 0;

        switch (category) {
            case ("sneakers"):
                if (condition == "new") {
                    conditionVal = 0.85;
                } else if (condition == "old") {
                    conditionVal = 0.80;
                }
                break;
            case ("streetwear"):
                if (condition == "new") {
                    conditionVal = 0.80;
                } else if (condition == "old") {
                    conditionVal = 0.75;
                }
                break;
            case ("accessories"):
                if (condition == "new") {
                    conditionVal = 0.75;
                } else if (condition == "old") {
                    conditionVal = 0.7;
                }
                break;
        }

        var listingVal = $("#id-listingprice").val();
        var netpriceVal = listingVal * conditionVal;

        $("#id-netprice").val(netpriceVal);
    }

    $(document).ready(function () {

        // Product size field show/hide
        $('input:radio[name=category]').click(function () {
            var catVal = $(this).attr("value");
            var targetBox = $("." + "f" + catVal);
            $(".size").not(targetBox).hide();
            $(targetBox).show();
        });

        // Product condition field show/hide
        $('input:radio[name=condition]').click(function () {
            var condVal = $(this).attr("value");
            if (condVal == "new") {
                $(".fview").hide();
                $(".foriginalbox").show();
                $(".fcleaning").hide();
            } else if (condVal == "old") {
                $(".fview").show();
                $(".foriginalbox").hide();
                $(".fcleaning").show();
            }
        });

        const scriptURL =
            'https://script.google.com/macros/s/AKfycbzy-MjRcg-NZZInpduJgMz1HTLb57Skmx8CTsLmq8slhtxE5XTx/exec';

        const form = document.forms['cocform'];

        $('#id-frontview').on("change", function () {
            var file = this.files[0];
            var fr = new FileReader();
            fr.fileName = file.name;
            fr.onload = function (e) {
                e.target.result;
                html = '<input type="hidden" name="datafrontview" value="' + e.target.result
                    .replace(/^.*,/,
                        '') + '" >';
                html += '<input type="hidden" name="mimetypefrontview" value="' + e.target.result
                    .match(
                        /^.*(?=;)/)[0] + '" >';
                html += '<input type="hidden" name="filenamefrontview" value="' + e.target
                    .fileName + '" >';
                $("#up-frontview").empty().append(html);
            }
            fr.readAsDataURL(file);
        });

        $('#id-leftview').on("change", function () {
            var file = this.files[0];
            var fr = new FileReader();
            fr.fileName = file.name;
            fr.onload = function (e) {
                e.target.result;
                html = '<input type="hidden" name="dataleftview" value="' + e.target.result.replace(
                    /^.*,/,
                    '') + '" >';
                html += '<input type="hidden" name="mimetypeleftview" value="' + e.target.result
                    .match(
                        /^.*(?=;)/)[0] + '" >';
                html += '<input type="hidden" name="filenameleftview" value="' + e.target.fileName +
                    '" >';
                $("#up-leftview").empty().append(html);
            }
            fr.readAsDataURL(file);
        });

        $('#id-rightview').on("change", function () {
            var file = this.files[0];
            var fr = new FileReader();
            fr.fileName = file.name;
            fr.onload = function (e) {
                e.target.result;
                html = '<input type="hidden" name="datarightview" value="' + e.target.result
                    .replace(
                        /^.*,/,
                        '') + '" >';
                html += '<input type="hidden" name="mimetyperightview" value="' + e.target.result
                    .match(
                        /^.*(?=;)/)[0] + '" >';
                html += '<input type="hidden" name="filenamerightview" value="' + e.target
                    .fileName +
                    '" >';
                $("#up-rightview").empty().append(html);
            }
            fr.readAsDataURL(file);
        });

        $('#id-heelview').on("change", function () {
            var file = this.files[0];
            var fr = new FileReader();
            fr.fileName = file.name;
            fr.onload = function (e) {
                e.target.result;
                html = '<input type="hidden" name="dataheelview" value="' + e.target.result
                    .replace(
                        /^.*,/,
                        '') + '" >';
                html += '<input type="hidden" name="mimetypeheelview" value="' + e.target.result
                    .match(
                        /^.*(?=;)/)[0] + '" >';
                html += '<input type="hidden" name="filenameheelview" value="' + e.target
                    .fileName +
                    '" >';
                $("#up-heelview").empty().append(html);
            }
            fr.readAsDataURL(file);
        });

        $('#id-soleview').on("change", function () {
            var file = this.files[0];
            var fr = new FileReader();
            fr.fileName = file.name;
            fr.onload = function (e) {
                e.target.result;
                html = '<input type="hidden" name="datasoleview" value="' + e.target.result
                    .replace(
                        /^.*,/,
                        '') + '" >';
                html += '<input type="hidden" name="mimetypesoleview" value="' + e.target.result
                    .match(
                        /^.*(?=;)/)[0] + '" >';
                html += '<input type="hidden" name="filenamesoleview" value="' + e.target
                    .fileName +
                    '" >';
                $("#up-soleview").empty().append(html);
            }
            fr.readAsDataURL(file);
        });

        form.addEventListener('submit', e => {
            e.preventDefault();
            var formData = new FormData(form);
            for (var pair of formData.entries()) {
                console.log(pair[0] + ', ' + pair[1]);
            }
            fetch(scriptURL, {
                    method: 'POST',
                    body: formData
                })
                .then(response => console.log('Success!', response))
                .catch(error => console.error('Error!', error.message))
        })
    });
</script>

</html>
